<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" id='ng-app' ng-app="hcr-map-path">
<head>
    <meta charset="UTF-8">
    <title>Path Creator</title>

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/main.css" rel="stylesheet" type="text/css">
</head>

<body ng-controller="MapController">
<!--	You can use either a div having class 'google-map' or the '<google-map>' element; in
	the latter case, uncomment the style above to make sure the custom elements gets block display	-->

    <div class="container">
        <div class="row">
            <h2>Path Creator</h2>
            <button class="btn btn-primary" ng-click="createNewPath()">สร้างเส้นทางใหม่</button>
            <button class="btn btn-default" ng-click="deletePath()">ลบข้อมูลทั้งหมด</button>
        </div>

        <div class="row">
            <ui-gmap-google-map
                    center="$storage.mapConfig.center"
                    zoom="$storage.mapConfig.zoom"
                    draggable="$storage.mapConfig.draggable"
                    dragging="$storage.mapConfig.dragging"
                    bounds="$storage.mapConfig.bounds"
                    options="$storage.mapConfig.options"
                    pan="$storage.mapConfig.pan"
                    control="map.control"
                    events="map.events"
                    style="margin:10px;"
                    >            
                
               <ui-gmap-markers
                        models='dataMarkers'
                        coords="'self'"
                        options="'options'"
                        click="'onClickedMarker'"
                        events='markersEvents'
                        isLabel='true'
                        >
                </ui-gmap-markers>
                <ui-gmap-polylines 
                                   models="$storage.mapConfig.polylines" 
                                   path="'path'" 
                                   stroke="'stroke'" 
                                   visible="'visible'"
                                   geodesic="'geodesic'" 
                                   fit="false" 
                                   editable="'editable'" 
                                   draggable="'draggable'" 
                                   icons="'icons'">
                </ui-gmap-polylines>                
            </ui-gmap-google-map>
        </div>

        <div class="row" ng-cloak class="ng-cloak">
            
            <div ng-class="pathSelectClass" style="overflow:hidden;" >
                <h2>
                    Path
                    <button class="btn btn-success" ng-click="doneEditPath()" ng-if="working">Done Edit</button>
                </h2>
                <div ng-repeat="p in $storage.mapConfig.polylines" ng-class="pathListClass" ng-click="editPath($index)">
                    <div class="info-box" style="border-left-color:{{ p.stroke.color }}">
                        <h4 style="color:{{ p.stroke.color }};">{{ p.name || p.id }}</h4>
                    </div>
                </div>
            </div>
            <div ng-class="pathEditClass" ng-if="working">
                <h3>
                    Edit : 
                    <span style="color:{{ $storage.mapConfig.polylines[currentPathIndex].stroke.color }};">{{ $storage.mapConfig.polylines[currentPathIndex].name || $storage.mapConfig.polylines[currentPathIndex].id }}</span>
                    <div class="pull-right">
                        <button class="btn btn-success" ng-click="drawLineToggle()"  ng-disabled="editLine">
                            {{ drawLineToggleButton }}
                        </button>
                        <button class="btn btn-default" ng-click="editLineToggle()"  ng-disabled="drawLine">
                            {{ editLineToggleButton }}
                        </button>               
                    </div>
                </h3>
                <div class="row form-group">
                    <div class="col-sm-4">
                      <div class="form-group">
                        <label for="input-id">Id</label>
                        <p class="form-control-static">
                          {{ $storage.mapConfig.polylines[currentPathIndex].id }}
                        </p>
                      </div>
                    </div>                    
                    <div class="col-sm-4">
                      <div class="form-group">
                        <label for="input-name">Name</label>
                        <input type="text" class="form-control" id="input-name" placeholder="Name" ng-model="$storage.mapConfig.polylines[currentPathIndex].name">
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="form-group">
                        <label for="input-color">Color</label>
                        <input type="text" class="form-control" id="input-color" placeholder="Color" ng-model="$storage.mapConfig.polylines[currentPathIndex].stroke.color">
                      </div>
                    </div>  
                </div>           
                <table class="table table-striped table-hover">
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>station</th>
                        <th>latitude</th>
                        <th>longitude</th>
                        <th>action</th>
                    </tr>
                    <tr ng-repeat="m in $storage.mapConfig.polylines[currentPathIndex].path"
                        ng-if="!$storage.mapConfig.polylines[currentPathIndex].path[0].dummy">
                        <td ng-bind="m.id"></td>
                        <td ng-bind="m.name"></td>
                        <td>
                            <span class="glyphicon glyphicon-ok" ng-if="m.station"></span>
                            <span class="glyphicon glyphicon-remove" ng-if="!m.station"></span>
                        </td>
                        <td ng-bind="m.latitude"></td>
                        <td ng-bind="m.longitude"></td>
                        <td>Edit / <a ng-click="deleteInPath($index)">Delete</a></td>
                    </tr>
                </table>  
            </div>
        </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    <script src='//maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry' type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js" type="text/javascript"></script>
    <script src="js/vendor/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/vendor/bluebird-2.3.6.js" type="text/javascript"></script>
    <script src="js/vendor/angular-google-maps-2.0.1.min.js" type="text/javascript"></script>
    <script src="js/vendor/ngStorage.min.js" type="text/javascript"></script>
    <script src="js/path.js"></script>
</body>

</html>
